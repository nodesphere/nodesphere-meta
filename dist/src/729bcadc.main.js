/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/**
* Copyright (c) 2014 Famous Industries, Inc.
*
* Permission is hereby granted, free of charge, to any person obtaining a
* copy of this software and associated documentation files (the "Software"),
* to deal in the Software without restriction, including without limitation
* the rights to use, copy, modify, merge, publish, distribute, sublicense,
* and/or sell copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
* IN THE SOFTWARE.
*
* @license MIT
*/

!function(){var t,e,i;!function(n){function r(t,e){return z.call(t,e)}function s(t,e){var i,n,r,s,o,a,u,h,c,l,p,f=e&&e.split("/"),d=v.map,y=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,v.nodeIdCompat&&b.test(t[o])&&(t[o]=t[o].replace(b,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||y)&&d){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(r=d[f.slice(0,l).join("/")],r&&(r=r[n])){s=r,a=c;break}if(s)break;!u&&y&&y[n]&&(u=y[n],h=c)}!s&&u&&(s=u,a=h),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function o(t,e){return function(){return f.apply(n,x.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return s(e,t)}}function u(t){return function(e){m[t]=e}}function h(t){if(r(g,t)){var e=g[t];delete g[t],_[t]=!0,p.apply(n,e)}if(!r(m,t)&&!r(_,t))throw new Error("No "+t);return m[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var p,f,d,y,m={},g={},v={},_={},z=Object.prototype.hasOwnProperty,x=[].slice,b=/\.js$/;d=function(t,e){var i,n=c(t),r=n[0];return t=n[1],r&&(r=s(r,e),i=h(r)),r?t=i&&i.normalize?i.normalize(t,a(e)):s(t,e):(t=s(t,e),n=c(t),r=n[0],t=n[1],r&&(i=h(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},y={require:function(t){return o(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:l(t)}}},p=function(t,e,i,s){var a,c,l,p,f,v,z=[],x=typeof i;if(s=s||t,"undefined"===x||"function"===x){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=d(e[f],s),c=p.f,"require"===c)z[f]=y.require(t);else if("exports"===c)z[f]=y.exports(t),v=!0;else if("module"===c)a=z[f]=y.module(t);else if(r(m,c)||r(g,c)||r(_,c))z[f]=h(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,o(s,!0),u(c),{}),z[f]=m[c]}l=i?i.apply(m[t],z):void 0,t&&(a&&a.exports!==n&&a.exports!==m[t]?m[t]=a.exports:l===n&&v||(m[t]=l))}else t&&(m[t]=i)},t=e=f=function(t,e,i,r,s){if("string"==typeof t)return y[t]?y[t](e):h(d(t,e).f);if(!t.splice){if(v=t,v.deps&&f(v.deps,v.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=r,r=s),r?p(n,t,e,i):setTimeout(function(){p(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=m,i=function(t,e,i){e.splice||(i=e,e=[]),r(m,t)||r(g,t)||(g[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function n(t){return a[t]}function r(t,e){a[t]=e}function s(t){var e=a.length;return r(e,t),e}function o(t){r(t,null)}var a=[];i.exports={register:s,unregister:o,get:n,set:r}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function r(t){return Math.sqrt(n(t))}function s(t){return 0>t?-1:1}var o={};o.precision=1e-6,o.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},o.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},o.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},o.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],r=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return o.thenMove(e,[i,n,r])},o.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},o.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},o.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},o.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},o.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},o.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},o.rotate=function(t,e,i){var n=Math.cos(t),r=Math.sin(t),s=Math.cos(e),o=Math.sin(e),a=Math.cos(i),u=Math.sin(i),h=[s*a,n*u+r*o*a,r*u-n*o*a,0,-s*u,n*a-r*o*u,r*a+n*o*u,0,o,-r*s,n*s,0,0,0,0,1];return h},o.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),r=1-n,s=t[0]*t[0]*r,o=t[0]*t[1]*r,a=t[0]*t[2]*r,u=t[1]*t[1]*r,h=t[1]*t[2]*r,c=t[2]*t[2]*r,l=t[0]*i,p=t[1]*i,f=t[2]*i,d=[s+n,o+f,a-p,0,o-f,u+n,h+l,0,a+p,h-l,c+n,0,0,0,0,1];return d},o.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),r=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return o.thenMove(e,[i,n,r])},o.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},o.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},o.getTranslate=function(t){return[t[12],t[13],t[14]]},o.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],r=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],o=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*n,l=1/c,p=[l*e,-l*r,l*a,0,-l*i,l*s,-l*u,0,l*n,-l*o,l*h,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},o.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},o.interpret=function(t){var e=[t[0],t[1],t[2]],i=s(e[0]),a=r(e),u=[e[0]+i*a,e[1],e[2]],h=2/n(u);if(h>=1/0)return{translate:o.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-h*u[0]*u[0],c[5]=1-h*u[1]*u[1],c[10]=1-h*u[2]*u[2],c[1]=-h*u[0]*u[1],c[2]=-h*u[0]*u[2],c[6]=-h*u[1]*u[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var l=o.multiply(c,t),p=[l[5],l[6]],f=s(p[0]),d=r(p),y=[p[0]+f*d,p[1]],m=2/n(y),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-m*y[0]*y[0],g[10]=1-m*y[1]*y[1],g[6]=-m*y[0]*y[1],g[9]=g[6];var v=o.multiply(g,c),_=o.multiply(v,t),z=o.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=o.multiply(_,z),v=o.multiply(z,v);var x={};return x.translate=o.getTranslate(t),x.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],x.rotate[0]||(x.rotate[0]=0,x.rotate[2]=Math.atan2(v[4],v[5])),x.scale=[_[0],_[5],_[10]],x.skew=[Math.atan2(_[9],x.scale[2]),Math.atan2(_[8],x.scale[2]),Math.atan2(_[4],x.scale[0])],Math.abs(x.rotate[0])+Math.abs(x.rotate[2])>1.5*Math.PI&&(x.rotate[1]=Math.PI-x.rotate[1],x.rotate[1]>Math.PI&&(x.rotate[1]-=2*Math.PI),x.rotate[1]<-Math.PI&&(x.rotate[1]+=2*Math.PI),x.rotate[0]<0?x.rotate[0]+=Math.PI:x.rotate[0]-=Math.PI,x.rotate[2]<0?x.rotate[2]+=Math.PI:x.rotate[2]-=Math.PI),x},o.average=function(t,e,i){i=void 0===i?.5:i;for(var n=o.interpret(t),r=o.interpret(e),s={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)s.translate[a]=(1-i)*n.translate[a]+i*r.translate[a],s.rotate[a]=(1-i)*n.rotate[a]+i*r.rotate[a],s.scale[a]=(1-i)*n.scale[a]+i*r.scale[a],s.skew[a]=(1-i)*n.skew[a]+i*r.skew[a];return o.build(s)},o.build=function(t){var e=o.scale(t.scale[0],t.scale[1],t.scale[2]),i=o.skew(t.skew[0],t.skew[1],t.skew[2]),n=o.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return o.thenMove(o.multiply(o.multiply(n,i),e),t.translate)},o.equals=function(t,e){return!o.notEquals(t,e)},o.notEquals=function(t,e){return t===e?!1:t&&e?!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]:!0},o.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},o.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],o.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=o}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function n(){this.result={}}function r(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var s=t("./Transform");n._instance=new n,n.parse=function(t,e){return n._instance.parse(t,e)},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,s.identity),this.result},n.prototype.reset=function(){this.result={}};var o=[0,0];n.prototype._parseSpec=function(t,e,i){var n,a,u,h,c,l,p;if("number"==typeof t){if(n=t,u=e.transform,l=e.align||e.origin,e.size&&l&&(l[0]||l[1])){var f=[l[0]*e.size[0],l[1]*e.size[1],0];u=s.thenMove(u,r(f,i))}this.result[n]={transform:u,opacity:e.opacity,origin:e.origin||o,align:e.align||e.origin||o,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,i);else{a=t.target,u=e.transform,h=e.opacity,c=e.origin,l=e.align,p=e.size;var y=i;if(void 0!==t.opacity&&(h=e.opacity*t.opacity),t.transform&&(u=s.multiply(e.transform,t.transform)),t.origin&&(c=t.origin,y=e.transform),t.align&&(l=t.align),t.size){var m=e.size;p=[void 0!==t.size[0]?t.size[0]:m[0],void 0!==t.size[1]?t.size[1]:m[1]],m&&(l||(l=c),l&&(l[0]||l[1])&&(u=s.thenMove(u,r([l[0]*m[0],l[1]*m[1],0],i))),c&&(c[0]||c[1])&&(u=s.moveThen([-c[0]*p[0],-c[1]*p[1],0],u))),y=e.transform,c=null,l=null}this._parseSpec(a,{transform:u,opacity:h,origin:c,align:l,size:p},y)}}},i.exports=n}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function r(t,e,i){for(var n=o.parse(t,e),a=Object.keys(n),u=0;u<a.length;u++){var h=a[u],c=s.get(h),l=n[h];l.allocator=e.allocator;var p=c.commit(l);p?r(p,e,i):i[h]=l}}var s=t("./Entity"),o=t("./SpecParser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var n=e[i];if(void 0===this._resultCache[n]){var o=s.get(n);o.cleanup&&o.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},r(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=n}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,e){var i=this.listeners[t].indexOf(e);return i>=0&&this.listeners[t].splice(i,1),this},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function n(){r.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var r=t("./EventEmitter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},n.prototype.emit=function(t,e){r.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(r.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=n}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},i.exports=n}),i("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var r=t("famous/utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=r.after(t.length,i),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function r(t,e,i){return(1-i)*t+i*e}function s(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function o(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,r){var s,o=1e-7,a=(i(r)-i(r-o))/o;if(t instanceof Array){s=[];for(var u=0;u<t.length;u++)s[u]="number"==typeof t[u]?a*(t[u]-e[u])/n:0}else s=a*(t-e)/n;return s}function u(t,e,i){var n;if(t instanceof Array){n=[];for(var s=0;s<t.length;s++)n[s]="number"==typeof t[s]?r(t[s],e[s],i):t[s]}else n=r(t,e,i);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var h={};n.registerCurve=function(t,e){return h[t]?!1:(h[t]=e,!0)},n.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},n.getCurve=function(t){var e=h[t];if(void 0!==e)return e;throw new Error("curve not registered")},n.getCurves=function(){return h},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=s(this.get()),e=o(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var r=0;for(var a in n)r+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(r)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=s(t),this._startVelocity=s(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=s(t),this.velocity=s(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function r(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=o,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new s(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,r.bind(this))}var s=t("./MultipleTransition"),o=t("./TweenTransition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||r.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function n(t){return[t.clientWidth,t.clientHeight]}function r(t){this.container=t,this._allocator=new a(t),this._node=new s,this._eventOutput=new o,this._size=n(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:c,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var s=t("./RenderNode"),o=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),h=t("famous/transitions/Transitionable"),c=[0,0];r.prototype.getAllocator=function(){return this._allocator},r.prototype.add=function(t){return this._node.add(t)},r.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},r.prototype.getSize=function(){return this._size},r.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},r.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},r.prototype.getPerspective=function(){return this._perspectiveState.get()},r.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},r.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},r.prototype.on=function(t,e){return this._eventOutput.on(t,e)},r.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},r.prototype.pipe=function(t){return this._eventOutput.pipe(t)},r.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=r}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function r(){this.eventOutput=new s,this.eventOutput.bindThis(this),s.setOutputHandler(this,this.eventOutput)}var s=t("./EventHandler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return r.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function n(){v.runLoop?(c.step(),requestAnimationFrame(n)):y=!1}function r(){for(var t=0;t<l.length;t++)l[t].emit("resize");g.emit("resize")}var s,o,a=t("./Context"),u=t("./EventHandler"),h=t("./OptionsManager"),c={},l=[],p=[],f=[],d=Date.now(),y=!0,m={},g=new u,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new h(v),z=10;c.step=function(){var t=Date.now();if(!(o&&o>t-d)){var e=0;for(s=t-d,d=t,g.emit("prerender"),e=0;e<p.length;e++)p[e].call(this);for(p.splice(0);f.length&&Date.now()-t<z;)f.shift().call(this);for(e=0;e<l.length;e++)l[e].update();g.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",r,!1),r(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),c.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(c):g.pipe(t)},c.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(c):g.unpipe(t)},c.on=function(t,e){return t in m||(m[t]=g.emit.bind(g,t),document.body?document.body.addEventListener(t,m[t]):c.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,m[t]))),g.on(t,e)},c.emit=function(t,e){return g.emit(t,e)},c.removeListener=function(t,e){return g.removeListener(t,e)},c.getFPS=function(){return 1e3/s},c.setFPSCap=function(t){o=Math.floor(1e3/t)},c.getOptions=function(){return _.getOptions.apply(_,arguments)},c.setOptions=function(){return _.setOptions.apply(_,arguments)},c.createContext=function(t){var e=!1;t||(t=document.createElement(v.containerType),t.classList.add(v.containerClass),e=!0);var i=new a(t);return c.registerContext(i),e&&c.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},c.registerContext=function(t){return l.push(t),t},c.nextTick=function(t){p.push(t)},c.defer=function(t){f.push(t)},_.on("change",function(t){"fpsCap"===t.id?c.setFPSCap(t.value):"runLoop"===t.id&&!y&&t.value&&(y=!0,requestAnimationFrame(n))}),i.exports=c}),i("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=p.register(this),t&&this.setOptions(t),this._currTarget=null}function r(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function s(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function o(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function u(t){for(var e in this.properties)t.style[e]=""}function h(t){t[12]=Math.round(t[12]*y)/y,t[13]=Math.round(t[13]*y)/y;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function c(t){return 100*t[0]+"% "+100*t[1]+"%"}function l(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var p=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),y=window.devicePixelRatio||1,m=void 0!==document.createElement("div").style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)
},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g;g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=h(e)}:m?function(t,e){t.style.webkitTransform=h(e)}:function(t,e){t.style.transform=h(e)};var v=m?function(t,e){t.style.webkitTransformOrigin=c(e)}:function(t,e){t.style.transformOrigin=c(e)},_=m?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",r.call(this,e),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,r=t.origin,s=t.size;if(this._classesDirty){o.call(this,e);for(var u=this.getClassList(),h=0;h<u.length;h++)e.classList.add(u[h]);this._classesDirty=!1}if(this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1),this.size){var c=s;s=[this.size[0],this.size[1]],void 0===s[0]&&c[0]&&(s[0]=c[0]),void 0===s[1]&&c[1]&&(s[1]=c[1])}if(s[0]===!0&&(s[0]=e.clientWidth),s[1]===!0&&(s[1]=e.clientHeight),l(this._size,s)&&(this._size||(this._size=[0,0]),this._size[0]=s[0],this._size[1]=s[1],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=null,this._opacity=0,void _(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=n>=1?"0.999999":n),l(this._origin,r)||d.notEquals(this._matrix,i)||this._sizeDirty){i||(i=d.identity),this._matrix=i;var p=i;r&&(this._origin||(this._origin=[0,0]),this._origin[0]=r[0],this._origin[1]=r[1],p=d.thenMove(i,[-this._size[0]*r[0],-this._size[1]*r[1],0]),v(e,r)),g(e,p)}this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1)},n.prototype.cleanup=function(t){var e=0,i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,u.call(this,i);var n=this.getClassList();for(o.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);s.call(this,i),this._currTarget=null,t.deallocate(i),_(i)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=n}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function n(t){this._final=o.identity.slice(),this.translate=new s([0,0,0]),this.rotate=new s([0,0,0]),this.skew=new s([0,0,0]),this.scale=new s([1,1,1]),t&&this.set(t)}function r(){return o.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var s=t("./Transitionable"),o=t("famous/core/Transform"),a=t("famous/utilities/Utility");n.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},n.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},n.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=r.call(this),this._final=o.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},n.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=o.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},n.prototype.set=function(t,e,i){this._final=t;var n=o.interpret(t),r=i?a.after(4,i):null;return this.translate.set(n.translate,e,r),this.rotate.set(n.rotate,e,r),this.skew.set(n.skew,e,r),this.scale.set(n.scale,e,r),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?r.call(this):this._final},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=n}),i("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:s.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))}function r(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var s=t("./Transform"),o=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new o(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new o(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},n.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new o(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},n.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new o(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getAlign=function(){return this._alignGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.modify=function(t){return r.call(this),this._output.target=t,this._output},i.exports=n}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function r(t,e,i){return this.x=t,this.y=e,this.z=i,this}function s(t){return r.call(this,t[0],t[1],t[2]||0)}function o(t){return r.call(this,t.x,t.y,t.z)}function a(t){return r.call(this,t,0,0)}var u=new n(0,0,0);n.prototype.add=function(t){return r.call(u,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return r.call(u,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return r.call(u,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,s=t.x,o=t.y,a=t.z;return r.call(u,n*o-i*a,e*a-n*s,i*s-e*o)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),o=Math.sin(t);return r.call(u,e,i*s-n*o,i*o+n*s)},n.prototype.rotateY=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),o=Math.sin(t);return r.call(u,n*o+e*s,i,n*s-e*o)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),o=Math.sin(t);return r.call(u,e*s-i*o,e*o+i*s,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?o.call(u,this.mult(t/e)):r.call(u,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?s.call(this,t):t instanceof n?o.call(this,t):"number"==typeof t?a.call(this,t):void 0},n.prototype.setXYZ=function(){return r.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){o.call(t,u)},n.prototype.clear=function(){return r.call(this,0,0,0)},n.prototype.cap=function h(h){if(1/0===h)return o.call(u,this);var t=this.norm();return t>h?o.call(u,this.mult(h/t)):o.call(u,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),o(u,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},i.exports=n}),i("famous/math/Matrix",["require","exports","module","./Vector"],function(t,e,i){function n(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var r=t("./Vector"),s=new n,o=new r;n.prototype.get=function(){return this.values},n.prototype.set=function(t){this.values=t},n.prototype.vectorMultiply=function(t){var e=this.get(),i=t.x,n=t.y,r=t.z,s=e[0],a=e[1],u=e[2],h=s[0],c=s[1],l=s[2],p=a[0],f=a[1],d=a[2],y=u[0],m=u[1],g=u[2];return o.setXYZ(h*i+c*n+l*r,p*i+f*n+d*r,y*i+m*n+g*r)},n.prototype.multiply=function(t){for(var e=this.get(),i=[[]],n=0;3>n;n++){i[n]=[];for(var r=0;3>r;r++){for(var o=0,a=0;3>a;a++)o+=e[n][a]*t[a][r];i[n][r]=o}}return s.set(i)},n.prototype.transpose=function(){for(var t=[],e=this.get(),i=0;3>i;i++)for(var n=0;3>n;n++)t[i][n]=e[n][i];return s.set(t)},n.prototype.clone=function(){for(var t=this.get(),e=[],i=0;3>i;i++)e[i]=t[i].slice();return new n(e)},i.exports=n}),i("famous/math/Quaternion",["require","exports","module","./Matrix"],function(t,e,i){function n(t,e,i,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==e?e:0,this.y=void 0!==i?i:0,this.z=void 0!==n?n:0),this}var r=t("./Matrix"),s=new n(1,0,0,0);n.prototype.add=function(t){return s.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},n.prototype.scalarMultiply=function(t){return s.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},n.prototype.multiply=function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.x,a=t.y,u=t.z,h=t.w||0;return s.setWXYZ(r*h-e*o-i*a-n*u,e*h+o*r+a*n-i*u,i*h+a*r+e*u-o*n,n*h+u*r+o*i-e*a)};var o=new n(1,0,0,0);n.prototype.rotateVector=function(t){return o.set(this.conj()),s.set(this.multiply(t).multiply(o))},n.prototype.inverse=function(){return s.set(this.conj().scalarDivide(this.normSquared()))},n.prototype.negate=function(){return this.scalarMultiply(-1)},n.prototype.conj=function(){return s.setWXYZ(this.w,-this.x,-this.y,-this.z)},n.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},n.prototype.makeFromAngleAndAxis=function(t,e){var i=e.normalize(),n=.5*t,r=-Math.sin(n);return this.x=r*i.x,this.y=r*i.y,this.z=r*i.z,this.w=Math.cos(n),this},n.prototype.setWXYZ=function(t,e,i,n){return s.clear(),this.w=t,this.x=e,this.y=i,this.z=n,this},n.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.clone=function(){return new n(this)},n.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},n.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.getTransform=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,r=t.w;return[1-2*i*i-2*n*n,2*e*i-2*n*r,2*e*n+2*i*r,0,2*e*i+2*n*r,1-2*e*e-2*n*n,2*i*n-2*e*r,0,2*e*n-2*i*r,2*i*n+2*e*r,1-2*e*e-2*i*i,0,0,0,0,1]};var a=new r;n.prototype.getMatrix=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,r=t.w;return a.set([[1-2*i*i-2*n*n,2*e*i+2*n*r,2*e*n-2*i*r],[2*e*i-2*n*r,1-2*e*e-2*n*n,2*i*n+2*e*r],[2*e*n+2*i*r,2*i*n-2*e*r,1-2*e*e-2*i*i]])};var u=1e-5;n.prototype.slerp=function(t,e){var i,n,r,o,a;return n=this.dot(t),1-n>u?(i=Math.acos(n),r=Math.sin(i),o=Math.sin((1-e)*i)/r,a=Math.sin(e*i)/r):(o=1-e,a=e),s.set(this.scalarMultiply(o/a).add(t).multiply(a))},i.exports=n}),i("main",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/math/Quaternion"],function(t){function e(t,e,i){function a(t){var e=new n({size:t.size,content:t.content,classes:t.classes,properties:t.properties}),i=new r({transform:t.transform});u.add(i).add(e)}var u=new o;return a({size:[t,e],content:'<iframe width="100%" height="100%" src="http://nodedev-three-production.herokuapp.com/"></iframe>',properties:{lineHeight:"25px",textSize:"20px",textAlign:"center",overflow:"auto"},transform:s.translate(0,0,i/2)}),a({size:[t,e],content:'<iframe width="100%" height="100%" src="http://nodedev-three-production.herokuapp.com/"></iframe>',properties:{lineHeight:e+"px",textAlign:"center",backgroundColor:"#ccc",fontSize:"18px",overflow:"hidden",color:"#777"},transform:s.multiply(s.translate(0,0,-i/2),s.multiply(s.rotateZ(Math.PI),s.rotateX(Math.PI)))}),a({size:[t,i],content:'<iframe width="100%" height="100%" src="http://bl.ocks.org/harlantwood/raw/8f486a7d5af1b72074b6/"></iframe>',properties:{lineHeight:i+"px",textAlign:"center",backgroundColor:"#0cf",overflow:"hidden",color:"#666"},transform:s.multiply(s.translate(0,-e/2,0),s.rotateX(Math.PI/2))}),a({size:[t,i],content:'<iframe width="100%" height="100%" src="http://bl.ocks.org/harlantwood/raw/8f486a7d5af1b72074b6/"></iframe>',properties:{lineHeight:i+"px",textAlign:"center",backgroundColor:"#fc0",overflow:"hidden",color:"#777"},transform:s.multiply(s.translate(0,e/2,0),s.multiply(s.rotateX(-Math.PI/2),s.rotateZ(Math.PI)))}),a({size:[i,e],content:'<iframe width="100%" height="100%" src="http://dev.nodesphere.org/"></iframe>',properties:{lineHeight:e+"px",textAlign:"center",backgroundColor:"#f0c",overflow:"hidden",color:"#777"},transform:s.multiply(s.translate(-t/2,0,0),s.rotateY(-Math.PI/2))}),a({size:[i,e],content:'<iframe width="100%" height="100%" src="http://dev.nodesphere.org/"></iframe>',properties:{lineHeight:e+"px",textAlign:"center",backgroundColor:"#c0f",overflow:"hidden",color:"#777"},transform:s.multiply(s.translate(t/2,0,0),s.rotateY(Math.PI/2))}),u}var i=t("famous/core/Engine"),n=t("famous/core/Surface"),r=t("famous/core/Modifier"),s=t("famous/core/Transform"),o=t("famous/core/RenderNode"),a=t("famous/math/Quaternion"),u=i.createContext(),h=new a(1,0,0,0),c=.555,l=new a(185,c,c,c),p=new r({origin:[.5,.5]});p.transformFrom(function(){return h.getTransform()}),u.add(p).add(e(555,555,555)),i.on("prerender",function(){h=h.multiply(l)})}),e(["main"])}();